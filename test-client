import socket


host = '127.0.0.1'
port = 8090

s=socket.socket()
s.bind((host,port))

while True:
    s.listen(5)
    connection,address=s.accept()
    request=connection.recv(1024)
    request=request.decode('utf-8')
    print('ip and request,{}\n{}'.format(address,request.decode('utf-8')))
    try:
        path=request.split()[1]
        response=response_for_path(path)
        connection.sendall(response)
    except Exception as e:
        log('error',e)
    response=b'HTTP/1.1 200 hao\r\n\r\n<h1>hello world!</h1>'

    connection.sendall(response)
    connection.close()
